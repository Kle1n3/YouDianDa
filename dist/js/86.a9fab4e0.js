"use strict";(self["webpackChunkydd"]=self["webpackChunkydd"]||[]).push([[86],{8086:function(t,e,a){a.r(e),a.d(e,{default:function(){return y}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"article-container"},[e("van-nav-bar",{attrs:{title:"文章详情","left-arrow":""},on:{"click-left":function(e){return t.$router.back()}}}),e("div",{staticClass:"main-wrap"},[1===t.isStatusCode?e("div",{staticClass:"loading-wrap"},[e("van-loading",{attrs:{color:"#3296fa",vertical:""}},[t._v("加载中")])],1):t._e(),2===t.isStatusCode?e("div",{staticClass:"article-detail"},[e("h1",{staticClass:"article-title"},[t._v(t._s(t.articleInfo.title))]),e("van-cell",{staticClass:"user-info",attrs:{center:"",border:!1}},[e("van-image",{staticClass:"avatar",attrs:{slot:"icon",round:"",fit:"cover",src:"https://img.yzcdn.cn/vant/cat.jpeg"},slot:"icon"}),e("div",{staticClass:"user-name",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.articleInfo.author))]),e("div",{staticClass:"publish-date",attrs:{slot:"label"},slot:"label"},[t._v(" "+t._s(t._f("relativeTime")(t.articleInfo.create_date))+" ")])],1),e("div",{ref:"content",staticClass:"article-content markdown-body",domProps:{innerHTML:t._s(t.articleInfo.content)}},[t._v(" 这是文章内容 ")]),e("van-divider",[t._v("正文结束")]),e("van-cell",{attrs:{title:"相关推荐"}}),e("van-grid",{attrs:{"column-num":2}},t._l(t.recommendList,(function(a){return e("van-grid-item",{key:a.id},[e("van-image",{attrs:{width:"120px",height:"100px",src:a.pic}}),e("p",{staticClass:"recommend-title"},[t._v(t._s(a.title))])],1)})),1),e("div",{staticClass:"article-bottom"},[e("Collect",{attrs:{article_id:t.articleInfo.id,isCollect:t.articleInfo.isCollect}}),e("Like",{attrs:{article_id:t.articleInfo.id,isLike:t.articleInfo.isLike}}),e("van-button",{attrs:{icon:"share",type:"default"},on:{click:function(e){t.showShare=!0}}}),e("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},model:{value:t.showShare,callback:function(e){t.showShare=e},expression:"showShare"}})],1)],1):t._e(),4===t.isStatusCode?e("div",{staticClass:"error-wrap"},[e("van-icon",{attrs:{name:"failure"}}),e("p",{staticClass:"text"},[t._v("该资源不存在或已删除！")])],1):t._e(),3===t.isStatusCode?e("div",{staticClass:"error-wrap"},[e("van-icon",{attrs:{name:"failure"}}),e("p",{staticClass:"text"},[t._v("内容加载失败！")]),e("van-button",{staticClass:"retry-btn",on:{click:t.initData}},[t._v("点击重试")])],1):t._e()])],1)},s=[],r=a(1984),n=function(){var t=this,e=t._self._c;return e("van-button",{attrs:{icon:t.Collect?"star":"star-o",type:"default"},on:{click:t.changeCollect}})},o=[],c={name:"Collect",props:{article_id:{type:[String,Number],required:!0},isCollect:{type:Boolean,required:!0}},data(){return{Collect:this.isCollect}},mounted(){},methods:{async changeCollect(){if(!this.$store.getters.token)return this.$toast.fail("请登录");try{this.Collect?(await(0,r.g7)({type:1,article_id:this.article_id,action:"del"}),this.$toast.success("取消成功")):(await(0,r.KX)({type:1,article_id:this.article_id,action:"add"}),this.$toast.success("收藏成功")),this.Collect=!this.Collect}catch(t){console.log(t)}}}},l=c,d=a(1001),u=(0,d.Z)(l,n,o,!1,null,"d9d32c4a",null),h=u.exports,m=function(){var t=this,e=t._self._c;return e("van-button",{attrs:{icon:t.Like?"good-job":"good-job-o",type:"default"},on:{click:t.changeLike}})},f=[],p={name:"Like",props:{article_id:{type:[String,Number],required:!0},isLike:{type:Boolean,required:!0}},data(){return{Like:this.isLike}},mounted(){},methods:{async changeLike(){if(console.log(111),!this.$store.getters.token)return this.$toast.fail("请登录");try{this.Like?(await(0,r.C)({type:2,article_id:this.article_id,action:"del"}),this.$toast.success("取消成功")):(await(0,r.sG)({type:2,article_id:this.article_id,action:"add"}),this.$toast.success("点赞成功")),this.Like=!this.Like}catch(t){console.log(t)}}}},v=p,C=(0,d.Z)(v,m,f,!1,null,"21132bfa",null),_=C.exports,k={name:"articleInfos",components:{Collect:h,Like:_},data(){return{isStatusCode:1,articleInfo:{},recommendList:[],showShare:!1,options:[[{name:"微信",icon:"wechat"},{name:"朋友圈",icon:"wechat-moments"},{name:"微博",icon:"weibo"},{name:"QQ",icon:"qq"}],[{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"},{name:"小程序码",icon:"weapp-qrcode"}]]}},created(){this.initData()},methods:{async initData(){try{const{data:t}=await(0,r.xr)({id:this.$route.query.id});this.articleInfo=t.data.info,this.recommendList=t.data.recommend,this.isStatusCode=2}catch(t){t.response&&404===t.response?this.isStatusCode=4:this.isStatusCode=3,console.log(t)}}}},g=k,w=(0,d.Z)(g,i,s,!1,null,"303d33f0",null),y=w.exports},1984:function(t,e,a){a.d(e,{C:function(){return c},KX:function(){return r},g7:function(){return n},sG:function(){return o},xr:function(){return s}});var i=a(4471);const s=t=>(0,i.Z)({method:"get",url:"/home/index/show",params:t}),r=t=>(0,i.Z)({url:"/home/user/userDataHandle",params:t}),n=t=>(0,i.Z)({url:"/home/user/userDataHandle",params:t}),o=t=>(0,i.Z)({url:"/home/user/userDataHandle",params:t}),c=t=>(0,i.Z)({url:"/home/user/userDataHandle",params:t})}}]);